<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>philip</title>
	<link rel="stylesheet" href="lib/bootstrap-3.3.2-dist/css/bootstrap.css"/>
	<link rel="stylesheet" href="main.css"/>
</head>
<body>
	<div class="background"></div>
	<div class="container">
		<div class="row">
			<div class="col-md-12" id="map" data-bind="css: { expanded: expanded() === 'map' }"></div>
		</div>
		<div class="row">
			<div class="col-md-12" id="menu">
				<div class="row">
					<div class="col-md-4 options-toggle" data-bind="css: { expanded: expanded() === 'map' }">
						<a href="#map" data-bind="click: toggleExpanded.bind($root, 'map')">change location</a>
					</div>
					<div class="col-md-4 options-toggle" data-bind="css: { expanded: expanded() === 'hunger' }">
						<a href="#" data-bind="click: toggleExpanded.bind($root, 'hunger')">change hunger?</a>
					</div>
					<div class="col-md-4 options-toggle" data-bind="css: { expanded: expanded() === 'prefs' }">
						<a href="#" data-bind="click: toggleExpanded.bind($root, 'prefs')">change preferences</a>
					</div>
				</div>
			</div>
		</div>
		<div id="hunger" class="row" data-bind="css: { expanded: expanded() === 'hunger' }">
			<div class="col-md-12" align="center" data-bind="with: profile">
				<h3>How hungry are you?</h3>

				<div id="hungergames" class="btn-group" role="group" >
					<button id="hunger0" type="button" class="btn btn-default btn-primary" data-bind="click: $root.preferences.myUser.setHunger.bind($root.preferences.myUser, 'hunger0')">Dunno</button>
					<button id="hunger1" type="button" class="btn btn-default" data-bind="click: $root.preferences.myUser.setHunger.bind($root.preferences.myUser,'hunger1')">Snack</button>
					<button id="hunger2" type="button" class="btn btn-default" data-bind="click: $root.preferences.myUser.setHunger.bind($root.preferences.myUser,'hunger2')">Hungry</button>
					<button id="hunger3" type="button" class="btn btn-default" data-bind="click: $root.preferences.myUser.setHunger.bind($root.preferences.myUser,'hunger3')">Starved</button>
					<button id="hunger4" type="button" class="btn btn-default" data-bind="click: $root.preferences.myUser.setHunger.bind($root.preferences.myUser,'hunger4')">Famished</button>
				</div>
			</div>
		</div>
		<div id="prefs" class="row" data-bind="with: preferences, css: { expanded: $root.expanded() === 'prefs' }">
			<div class="col-md-12">
			<p data-bind="text: GetGreeting()"></p>
			<input type="text" name="age" id="pref.age" data-bind="value: myUser.age"
				   onfocus="if (this.value=='Enter age:') this.value = ''" onblur="var str = this.value.replace(/\s+/g, ''); if(str == '') this.value = 'Enter age:'"> <br>

			<!--<select data-bind="options: ActivityOptions, value: myUser.activityLevel"></select>-->
			<div class="dropdown">
				<button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
					Activity Level
					<span class="caret"></span>
				</button>
				<ul class="dropdown-menu" role="menu">
					<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Free range</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Leashed</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Caged</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Dead Cage</a></li>
				</ul>
			</div>
			<br>
			<!--activity drop down and age-->
			<label for="pref.size">Meal Size</label>
			<input name="Size" id="pref.size" type="range" min="0" max="10" data-bind="value: myPreferences.mealSize">

			<div role="tabpanel" id="pref.TabPanel">
				<ul class="nav nav-pills">
					<li role="presentation" class="active"><a href="#targets" role="tab" data-toggle="tab">Settings</a></li>
					<li role="presentation"><a href="#day" role="tab" data-toggle="tab" data-bind="click: $root.preferences.DrawDayGraph">Day</a></li>
					<li role="presentation"><a href="#history" role="tab" data-toggle="tab" data-bind="click: $root.preferences.DrawGraph">History</a></li>
				</ul>
				<div id="pref.TabContent" class="tab-content">
					<div role="tabpanel" class="tab-pane fade active in" id="targets" >
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">My Settings</h3>
							</div>

							<div class="container">
								<label><input type="checkbox" value="truck" data-bind="checked: $root.desiredTypes"> Food Trucks</label>
								<label><input type="checkbox" value="tree" data-bind="checked: $root.desiredTypes"> Fruit Trees</label>
								<label><input type="checkbox" value="restaurant" data-bind="checked: $root.desiredTypes"> Restaurants</label>
							</div>

							<div class="panel-body progContainer">
								<b></b>
								<div class="progress vertProgLeft">
									<div class="progress-bar" role="progressbar"  style="width: 80%;">
										80%
									</div>
								</div>
								<div class="progress vertProg">
									<div class="progress-bar" role="progressbar" style="width: 60%;">
										60%
									</div>
								</div>
							</div>
						</div>
					</div>

					<div role="tabpanel" class="tab-pane fade " id="day" >
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">My Day</h3>
							</div>

							<div id="prefDayPlot" style="width:400px;height:200px"></div>
						</div>
					</div>

					<div role="tabpanel" class="tab-pane fade " id="history" >
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">My History</h3>
							</div>

							<div id="prefHistoryPlot" style="width:400px;height:200px"></div>
							<div id="prefHistoryChoices" class="container">
								<input type="checkbox" name="showHistCalories" id="pref.showHistCalories" data-bind="checked: myPreferences.isShowHistCalories">
								<label for="pref.showHistCalories">Calories</label>
								<input type="checkbox" name="showHistProtein" id="pref.showHistProtein" data-bind="checked: myPreferences.isShowHistProtein">
								<label for="pref.showHistProtein">Protein</label>
								<input type="checkbox" name="showHistFat" id="pref.showHistFat" data-bind="checked: myPreferences.isShowHistFat">
								<label for="pref.showHistFat">Fat</label>
								<input type="checkbox" name="showHistCarbs" id="pref.showHistCarbs" data-bind="checked: myPreferences.isShowHistCarbs">
								<label for="pref.showHistCarbs">Carbs</label>
							</div>
						</div>
					</div>
				</div>
			</div>
			</div>
		</div>
		<div id="recommendations" class="row">
			<div class="col-md-12">
				<table class="table table-hover food-list">
					<thead>
						<tr id="listColumns">
							<th colspan="2" width="100%">
								<input class="form-control" type="search" data-bind="value: search, valueUpdate: ['input', 'afterkeydown']" placeholder="Search" />
							</th>
							<th id="calories" class="food-list-metric" data-bind="click: $root.sortBy.bind($root, 'calories')">
								<span class="glyphicon glyphicon-sort"></span>
								Calories</th>
							<th id="protein" class="food-list-metric" data-bind="click: $root.sortBy.bind($root, 'protein')">
								<span class="glyphicon glyphicon-sort"></span>
								Protein</th>
							<th id="carbs" class="food-list-metric" data-bind="click: $root.sortBy.bind($root, 'carbs')">
								<span class="glyphicon glyphicon-sort"></span>
								Carbs</th>
							<th id="totalFat" class="food-list-metric" data-bind="click: $root.sortBy.bind($root, 'totalFat')">
								<span class="glyphicon glyphicon-sort"></span>
								Total Fat</th>
							<th id="distance" class="food-list-metric" data-bind="click: $root.sortBy.bind($root, 'distance')">
								<span class="glyphicon glyphicon-sort"></span>
								Distance</th>
							<th id="totalHealthIndex" class="food-list-metric" data-bind="click: $root.sortBy.bind($root, 'totalHealthIndex')">
								<span class="glyphicon glyphicon-sort"></span>
								<abbr title="Total Health Index">THI</abbr></th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<!-- ko foreach: sortedFoodItems -->
						<tr>
							<td class="food-list-icon"><img width="40px" height="40px" data-bind="attr:{src: iconPath()}"/></td>
							<td class="food-list-description">
								<span class="badge" data-bind="visible: measureLabel, text: measureLabel"></span>
								<span class="name" data-bind="text: nameLabel"></span>
								<span class="size" data-bind="text: weightLabel"></span>
								from
								<a href="#"><span class="from" data-bind="text: from.name, click: $root.map.panToLocation.bind($root.map, from)"></span></a>
							</td>
							<td class="food-list-metric" data-bind="text: caloriesLabel"></td>
							<td class="food-list-metric" data-bind="text: proteinLabel"></td>
							<td class="food-list-metric" data-bind="text: carbsLabel"></td>
							<td class="food-list-metric" data-bind="text: totalFatLabel"></td>
							<td class="food-list-metric" data-bind="text: trimDigits(from.km) + ' km'"></td>
							<td class="food-list-metric" data-bind="text: trimDigits(totalHealthIndex, 3)"></td>
							<td class="food-list-rating">
								<span class="glyphicon" aria-hidden="true" data-bind="css: {
									'glyphicon-thumbs-up': totalHealthIndex > 1,
									'glyphicon-thumbs-down': totalHealthIndex < -1 }"></span>
							</td>
						</tr>
						<!-- /ko -->
						<tr class="no-nearby">
							<td colspan="9">
								<div class="row">
									<div class="well col-md-8 col-md-offset-2" data-bind="visible: search">
										<p>No nearby food sources matched your search.</p>
									</div>
									<div class="well col-md-8 col-md-offset-2" data-bind="visible: !search()">
										<p data-bind="if: !search()">No nearby food sources found.</p>
										<p>Take a look at <a href="#" data-bind="click: vancouver">Vancouver</a> to see what open data makes possible, or browse <a href="#">all food items</a></p>
									</div>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<h4>About</h4>
				<p>MakeGoodChoices empowers Canadians to make healthy food choices as part of a healthy lifestyle, while encouraging them to engage with their local community.</p>
				<p>Based on Health Canada's guidelines for a healthy diet, we calculate and provides a health score for food options in the user's vicinity. This health index condenses nutritional information on macronutrient balance, sodium intake, caloric value, and more, into an easily comprehensible rating to better inform the user's decision on what to eat.</p>
				<h4>Datasets Used</h4>
				<p>In addition to the federal nutritional info open dataset, information has been drawn from municipal, provincial, and additional federal datasets not available through the Open Data portal. MakeGoodChoices uses local information to provide a context for choosing food to support a healthy lifestyle. Beyond just chain restaurants, users can explore the options available from community food trees and gardens, local food vendors, farmers' markets, and supermarkets.</p>
			</div>
		</div>
	</div>
	<script src="lib/jquery-2.1.3.js"></script>
	<script src="lib/bootstrap-3.3.2-dist/js/bootstrap.js"></script>
	<script src="lib/knockout-3.3.0.debug.js"></script>
	<script src="lib/polyfills.js"></script>
	<script src="lib/flot/jquery.flot.js"></script>
	<script src="data/generics.js"></script>
	<script src="data/fatabase.js"></script>
	<script src="data/healthyfamiliesbc.js"></script>
	<script src="data/menus.js"></script>
	<script src="data/locations.js"></script>
	<script src="data/dietneeds.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCMMQJPrM--XYTU3oG52NDbKLQ0oZCe-rg"></script>
	<script src="preferences.js"></script>
	<script src="main.js"></script>
</body>
</html>
